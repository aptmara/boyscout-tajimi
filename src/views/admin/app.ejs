<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-01HSHJXTDH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-01HSHJXTDH');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="csrf-token" content="<%= csrfToken %>">
  <title>管理コンソール</title>
  <link rel="stylesheet" href="/styles/admin-app.css">
  <link rel="stylesheet" href="/styles/admin-styles.css">
</head>

<body class="admin-body">
  <div class="admin-app">
    <aside class="admin-sidebar" aria-label="メインメニュー">
      <div class="sidebar-header">
        <div class="sidebar-brand">
          <span class="brand-logo" aria-hidden="true">⛺</span>
          <div>
            <p class="brand-title">多治見第一団</p>
            <p class="brand-subtitle">管理コンソール</p>
          </div>
        </div>
        <button id="sidebar-close" class="icon-button" aria-label="メニューを閉じる">✕</button>
      </div>
      <div class="sidebar-section">
        <p class="sidebar-label">概要</p>
        <nav class="sidebar-nav">
          <button type="button" data-view="dashboard" class="nav-btn active">
            <span class="nav-icon">📊</span>
            <span>ダッシュボード</span>
          </button>
        </nav>
      </div>
      <div class="sidebar-section">
        <p class="sidebar-label">コンテンツ</p>
        <nav class="sidebar-nav">
          <button type="button" data-view="news" class="nav-btn">
            <span class="nav-icon">📰</span>
            <span>お知らせ</span>
          </button>
          <button type="button" data-view="activities" class="nav-btn">
            <span class="nav-icon">🎒</span>
            <span>活動記録</span>
          </button>
        </nav>
      </div>
      <div class="sidebar-section" data-require-admin>
        <p class="sidebar-label">サイト設定</p>
        <nav class="sidebar-nav">
          <button type="button" data-view="settings" class="nav-btn">
            <span class="nav-icon">⚙️</span>
            <span>サイト設定</span>
          </button>
        </nav>
      </div>
      <div class="sidebar-section" data-require-admin>
        <p class="sidebar-label">管理</p>
        <nav class="sidebar-nav">
          <button type="button" data-view="users" class="nav-btn">
            <span class="nav-icon">👥</span>
            <span>ユーザー管理</span>
          </button>
          <button type="button" data-view="audit-logs" class="nav-btn">
            <span class="nav-icon">📋</span>
            <span>セキュリティログ</span>
          </button>
        </nav>
      </div>
      <div class="sidebar-footer">
        <button id="logout-btn" class="btn-ghost full">ログアウト</button>
        <p class="sidebar-meta">Ctrl / Cmd + K で検索</p>
      </div>
    </aside>

    <div class="admin-main">
      <header class="topbar">
        <div class="topbar-leading">
          <button id="sidebar-open" class="icon-button" aria-label="メニューを開く">☰</button>
          <div>
            <h1 id="view-title" class="topbar-title">読み込み中...</h1>
            <p id="view-subtitle" class="topbar-subtitle"></p>
          </div>
        </div>
        <div class="topbar-actions">
          <label class="search-field">
            <span class="search-icon" aria-hidden="true">🔍</span>
            <input id="global-search" type="search" placeholder="コマンドや記事を検索 (Ctrl/⌘+K)" aria-label="グローバル検索">
          </label>
          <div class="divider" role="presentation"></div>
          <button id="quick-actions-btn" class="btn-ghost" aria-expanded="false">クイックアクション</button>
          <button id="new-item-btn" class="btn-primary">＋ 新規作成</button>
          <div class="topbar-zoom" role="group" aria-label="表示倍率">
            <button id="zoom-dec" class="icon-button" type="button">A−</button>
            <button id="zoom-inc" class="icon-button" type="button">A＋</button>
          </div>
        </div>
      </header>
      <main id="view-root" class="view-root" tabindex="-1" aria-live="polite">
        <section class="view-skeleton">
          <div class="skeleton-card"></div>
          <div class="skeleton-card"></div>
          <div class="skeleton-card"></div>
        </section>
      </main>
    </div>
  </div>

  <div id="cmdp-backdrop" class="cmdp-backdrop" aria-hidden="true">
    <div class="cmdp" role="dialog" aria-modal="true" aria-labelledby="cmdp-label">
      <div class="cmdp-head">
        <input id="cmdp-input" type="text" autocomplete="off" placeholder="操作や記事を検索…" aria-label="コマンド検索">
      </div>
      <div id="cmdp-list" class="cmdp-list" role="listbox" aria-activedescendant=""></div>
    </div>
  </div>

  <div id="quick-actions-panel" class="quick-actions" role="menu" aria-hidden="true">
    <button type="button" data-action="news:new">📰 新しいお知らせ</button>
    <button type="button" data-action="activities:new">🎒 新しい活動</button>
    <button type="button" data-action="settings" data-require-admin>⚙️ サイト設定を開く</button>
  </div>

  <div id="toast-stack" class="toast-stack" aria-live="assertive" aria-atomic="true"></div>
  <script src="/admin/admin-ui.js"></script>
  <!-- Admin modules (single responsibility) -->
  <script src="/admin/admin-utils-api.js"></script>
  <script src="/admin/admin-palette.js"></script>
  <script src="/admin/admin-views.js"></script>
  <script src="/admin/admin-editors.js"></script>
  <script src="/admin/admin-layout.js"></script>
</body>

</html>