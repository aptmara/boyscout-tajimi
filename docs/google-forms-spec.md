# Googleフォーム仕様書

## 概要

| # | フォーム名 | エンドポイント | トリガー関数 |
|---|-----------|----------------|--------------|
| 1 | ニュース投稿（簡単） | `/api/news/webhook` | `onFormSubmitNews` |
| 2 | ニュース投稿（Docs連携） | `/api/news/webhook` | `onFormSubmitNews` |
| 3 | 活動報告（簡単） | `/api/activities/webhook` | `onFormSubmitActivity` |
| 4 | 活動報告（Docs連携） | `/api/activities/webhook` | `onFormSubmitActivity` |

---

## フォーム①: ニュース投稿（簡単）

### 基本情報
- **フォームタイトル**: ニュース投稿フォーム
- **フォーム説明**: 
  ```
  ボーイスカウト多治見第1団のウェブサイトにニュースを投稿します。
  写真付きの簡単な記事を投稿できます。
  ```

### 質問一覧

#### 質問1: タイトル
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `タイトル` |
| 質問の種類 | 記述式（短文） |
| 必須 | ✅ はい |
| 説明 | `記事のタイトルを入力してください` |

#### 質問2: 本文
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `本文` |
| 質問の種類 | 段落（長文） |
| 必須 | ❌ いいえ |
| 説明 | `記事の内容を入力してください。簡易Markdown対応: **太字** _斜体_ [リンクテキスト](URL)` |

#### 質問3: 写真アップロード
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `写真アップロード` |
| 質問の種類 | ファイルのアップロード |
| 必須 | ❌ いいえ |
| ファイル形式 | 画像のみ |
| 最大ファイル数 | 5 |
| 最大ファイルサイズ | 10MB |
| 説明 | `記事に掲載する写真を選択してください（最大5枚）` |

#### 質問4: カテゴリ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `カテゴリ` |
| 質問の種類 | プルダウン |
| 必須 | ❌ いいえ |
| 選択肢 | `お知らせ` / `イベント` / `活動報告` / `その他` |
| 説明 | なし |

#### 質問5: 隊
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `隊` |
| 質問の種類 | チェックボックス（複数選択可） |
| 必須 | ❌ いいえ |
| 選択肢 | `団全体` / `ビーバー隊` / `カブ隊` / `ボーイ隊` / `ベンチャー隊` / `ローバー隊` |
| 説明 | `複数選択可能` |
| 説明 | なし |

#### 質問6: タグ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `タグ` |
| 質問の種類 | 記述式（短文） |
| 必須 | ❌ いいえ |
| 説明 | `カンマ区切りで入力（例: 夏キャンプ, 野外活動, キャンプファイヤー）` |

---

## フォーム②: ニュース投稿（Docs連携）

### 基本情報
- **フォームタイトル**: ニュース投稿フォーム（Googleドキュメント連携）
- **フォーム説明**: 
  ```
  Googleドキュメントで作成した記事をウェブサイトに投稿します。
  見出し・箇条書き・画像など自由なレイアウトで作成できます。
  
  【事前準備】
  1. Googleドキュメントで記事を作成
  2. 共有設定で「リンクを知っている全員が閲覧可」に設定
  3. ドキュメントのURLをコピー
  ```

### 質問一覧

#### 質問1: 記事タイトル
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `記事タイトル` |
| 質問の種類 | 記述式（短文） |
| 必須 | ✅ はい |
| 説明 | `ウェブサイトに表示されるタイトルを入力してください` |

#### 質問2: Googleドキュメントの共有リンク
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `Googleドキュメントの共有リンク` |
| 質問の種類 | 記述式（短文） |
| 必須 | ✅ はい |
| 説明 | `ドキュメントのURLを貼り付けてください（例: https://docs.google.com/document/d/xxxxx/edit）` |
| 回答の検証 | URL形式（任意） |

#### 質問3: カテゴリ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `カテゴリ` |
| 質問の種類 | プルダウン |
| 必須 | ❌ いいえ |
| 選択肢 | `お知らせ` / `イベント` / `活動報告` / `その他` |

#### 質問4: 隊
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `隊` |
| 質問の種類 | チェックボックス（複数選択可） |
| 必須 | ❌ いいえ |
| 選択肢 | `団全体` / `ビーバー隊` / `カブ隊` / `ボーイ隊` / `ベンチャー隊` / `ローバー隊` |
| 説明 | `複数選択可能` |

#### 質問5: タグ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `タグ` |
| 質問の種類 | 記述式（短文） |
| 必須 | ❌ いいえ |
| 説明 | `カンマ区切りで入力（例: 夏キャンプ, 野外活動）` |

---

## フォーム③: 活動報告（簡単）

### 基本情報
- **フォームタイトル**: 活動報告フォーム
- **フォーム説明**: 
  ```
  隊の活動報告を投稿します。
  活動日と写真を添えて報告してください。
  ```

### 質問一覧

#### 質問1: タイトル
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `タイトル` |
| 質問の種類 | 記述式（短文） |
| 必須 | ✅ はい |
| 説明 | `活動のタイトルを入力してください（例: 7月キャンプ in 郡上八幡）` |

#### 質問2: 活動日
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `活動日` |
| 質問の種類 | 日付 |
| 必須 | ✅ はい |
| 説明 | `活動を行った日を選択してください` |

#### 質問3: 本文
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `本文` |
| 質問の種類 | 段落（長文） |
| 必須 | ❌ いいえ |
| 説明 | `活動の内容を記入してください。簡易Markdown対応: **太字** _斜体_ [リンク](URL)` |

#### 質問4: 写真アップロード
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `写真アップロード` |
| 質問の種類 | ファイルのアップロード |
| 必須 | ❌ いいえ |
| ファイル形式 | 画像のみ |
| 最大ファイル数 | 5 |
| 最大ファイルサイズ | 10MB |
| 説明 | `活動の写真を選択してください（最大5枚）` |

#### 質問5: カテゴリ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `カテゴリ` |
| 質問の種類 | プルダウン |
| 必須 | ❌ いいえ |
| 選択肢 | `キャンプ` / `ハイキング` / `奉仕活動` / `集会` / `訓練` / `その他` |

#### 質問6: 隊
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `隊` |
| 質問の種類 | チェックボックス（複数選択可） |
| 必須 | ✅ はい |
| 選択肢 | `団全体` / `ビーバー隊` / `カブ隊` / `ボーイ隊` / `ベンチャー隊` / `ローバー隊` |
| 説明 | `複数選択可能（1つ以上選択）` |

#### 質問7: タグ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `タグ` |
| 質問の種類 | 記述式（短文） |
| 必須 | ❌ いいえ |
| 説明 | `カンマ区切りで入力（例: 夏キャンプ, 野外活動）` |

---

## フォーム④: 活動報告（Docs連携）

### 基本情報
- **フォームタイトル**: 活動報告フォーム（Googleドキュメント連携）
- **フォーム説明**: 
  ```
  Googleドキュメントで作成した活動報告を投稿します。
  写真を多く使いたい場合やレイアウトにこだわりたい場合におすすめです。
  
  【事前準備】
  1. Googleドキュメントで活動報告を作成
  2. 共有設定で「リンクを知っている全員が閲覧可」に設定
  3. ドキュメントのURLをコピー
  ```

### 質問一覧

#### 質問1: 記事タイトル
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `記事タイトル` |
| 質問の種類 | 記述式（短文） |
| 必須 | ✅ はい |
| 説明 | `ウェブサイトに表示されるタイトルを入力してください` |

#### 質問2: 活動日
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `活動日` |
| 質問の種類 | 日付 |
| 必須 | ✅ はい |
| 説明 | `活動を行った日を選択してください` |

#### 質問3: Googleドキュメントの共有リンク
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `Googleドキュメントの共有リンク` |
| 質問の種類 | 記述式（短文） |
| 必須 | ✅ はい |
| 説明 | `ドキュメントのURLを貼り付けてください` |

#### 質問4: カテゴリ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `カテゴリ` |
| 質問の種類 | プルダウン |
| 必須 | ❌ いいえ |
| 選択肢 | `キャンプ` / `ハイキング` / `奉仕活動` / `集会` / `訓練` / `その他` |

#### 質問5: 隊
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `隊` |
| 質問の種類 | チェックボックス（複数選択可） |
| 必須 | ✅ はい |
| 選択肢 | `団全体` / `ビーバー隊` / `カブ隊` / `ボーイ隊` / `ベンチャー隊` / `ローバー隊` |
| 説明 | `複数選択可能（1つ以上選択）` |

#### 質問6: タグ
| 項目 | 設定値 |
|------|--------|
| 質問タイトル | `タグ` |
| 質問の種類 | 記述式（短文） |
| 必須 | ❌ いいえ |
| 説明 | `カンマ区切りで入力（例: 夏キャンプ, 野外活動）` |

---

## GAS設定

### スクリプトプロパティ
| キー | 値 |
|------|-----|
| `WEBHOOK_SECRET` | サーバーと同じシークレットキー |

### トリガー設定（計4つ）
| フォーム | 関数 | イベント |
|----------|------|----------|
| ニュース投稿（簡単） | `onFormSubmitNews` | フォーム送信時 |
| ニュース投稿（Docs連携） | `onFormSubmitNews` | フォーム送信時 |
| 活動報告（簡単） | `onFormSubmitActivity` | フォーム送信時 |
| 活動報告（Docs連携） | `onFormSubmitActivity` | フォーム送信時 |

### トリガー追加手順
1. Apps Script エディタを開く
2. 左メニュー「トリガー」（時計アイコン）
3. 「トリガーを追加」
4. 以下を設定:
   - 実行する関数: `onFormSubmitNews` または `onFormSubmitActivity`
   - イベントのソース: 「フォームから」
   - イベントの種類: 「フォーム送信時」
   - フォームを選択: 対象のフォームを選択
5. 保存
